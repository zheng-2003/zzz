
<!DOCTYPE html>
<html lang="en">
    <!DOCTYPE html>
<html lang="en">
<head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  
    <link rel="icon" href="/img/favicon.png">
  
  
      <meta name="author" content="é˜¿æ­£">
  
  
  
  
  
    <link rel="alternate" href="/atom.xml " title="æ¬¢è¿æ¥åˆ°é˜¿æ­£çš„åšå®¢" type="application/atom+xml">
  

  

  <title>æ¬¢è¿æ¥åˆ°é˜¿æ­£çš„åšå®¢</title>

  

  

  

  <link rel="stylesheet" href="/css/style.css" >
  <link rel="stylesheet" href="/css/partial/dark.css" >

  
    <link rel="preconnect" href="https://fonts.googleapis.com" crossorigin="">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@400;500;700&amp;display=swap"  media="print" onload="this.media='all'">
  
  
  

  
    
      <link rel="stylesheet" href="/css/partial/highlight/atom-one-light.css">
    
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css">
    
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css">
    
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/a2396837/CDN@latest/css/iconfont.css">
    
  

  
    <script src="/js/todark.js"></script>
    
<meta name="generator" content="Hexo 5.4.0"></head>
</html>
    
<div class="nav index" style="height: 60px;">
    <div class="title animated fadeInDown">
        <div class="layui-container">
                <div class="nav-title"><a href="/" title="æ¬¢è¿æ¥åˆ°é˜¿æ­£çš„åšå®¢">æ¬¢è¿æ¥åˆ°é˜¿æ­£çš„åšå®¢</a></div>
            <div class="nav-list">
                <button> <span class=""></span><span style="display: block;"></span><span class=""></span> </button>
                <ul class="layui-nav" lay-filter="">
                    
                        
                        
                        
                        
                    <li class="layui-nav-item">
                        <a href="/blong/data/links.yml/">
                            <i class="" style="color:;"></i>
                            <span class="layui-nav-item-name">Search</span>
                        </a>
                    </li>
                    
                        
                        
                        
                        
                    <li class="layui-nav-item">
                        <a href="/ ">
                            <i class=" fab fa-fort-awesome " style="color: rgb(255 107 107);"></i>
                            <span class="layui-nav-item-name">Home</span>
                        </a>
                    </li>
                    
                        
                        
                        
                        
                    <li class="layui-nav-item">
                        <a href="/blong/archives/">
                            <i class="" style="color:;"></i>
                            <span class="layui-nav-item-name">Archives</span>
                        </a>
                    </li>
                    
                        
                        
                        
                        
                    <li class="layui-nav-item">
                        <a href="/blong/tags/">
                            <i class="" style="color:;"></i>
                            <span class="layui-nav-item-name">Tags</span>
                        </a>
                    </li>
                    
                        
                        
                        
                        
                    <li class="layui-nav-item">
                        <a href="/blong/categories/">
                            <i class="" style="color:;"></i>
                            <span class="layui-nav-item-name">Categories</span>
                        </a>
                    </li>
                    
                        
                        
                        
                        
                    <li class="layui-nav-item">
                        <a href="/blong/about/">
                            <i class="" style="color:;"></i>
                            <span class="layui-nav-item-name">About</span>
                        </a>
                    </li>
                    
                        
                        
                        
                        
                    <li class="layui-nav-item">
                        <a href="/guestbook/ ">
                            <i class=" fab fa-telegram " style="color: hsl(205deg 100% 50%);"></i>
                            <span class="layui-nav-item-name">Guestbook</span>
                        </a>
                    </li>
                    
                        
                        
                        
                        
                    <li class="layui-nav-item">
                        <a href="/blong/link/">
                            <i class="" style="color:;"></i>
                            <span class="layui-nav-item-name">Friends</span>
                        </a>
                    </li>
                    
                        
                        
                        
                        
                    <li class="layui-nav-item">
                        <a href="/shuoshuo/ ">
                            <i class=" fas fa-coffee " style="color:#31c7c1;"></i>
                            <span class="layui-nav-item-name">è¯´è¯´</span>
                        </a>
                    </li>
                    
                    
                        <li class="layui-nav-item" id="btn-toggle-dark">ğŸŒ™</li>
                    
                    <span class="layui-nav-bar" style="left: 342px; top: 78px; width: 0px; opacity: 0;"></span>
                </ul>
            </div>
        </div>
    </div>
</div>
    
<header class="header">
        
            <div class="logo">
                    <a href="/"><img src="/img/hhj.png/" onerror=this.onerror=null,this.src="/img/hhj.png"></a>
            </div>
         
    </div>
     
    
            <div class="social">
                
                        <a class="social-icon" href="https://github.com/a2396837" target="_blank" title="Github">
                            <i class="iconfont icon-GitHub" aria-hidden="true"></i>
                          </a>
                 
                        <a class="social-icon" href="mailto:894049579@qq.com" target="_blank" title="Email">
                            <i class="iconfont icon-email" aria-hidden="true"></i>
                          </a>
                 
                        <a class="social-icon" href="https://steamcommunity.com/id/a2396837" target="_blank" title="Steam">
                            <i class="iconfont icon-steam" aria-hidden="true"></i>
                          </a>
                 
                        <a class="social-icon" href="https://space.bilibili.com/8823569" target="_blank" title="Bilibili">
                            <i class="iconfont icon-bilibili" aria-hidden="true"></i>
                          </a>
                 
                        <a class="social-icon" href="https://music.163.com/#/user/home?id=262078590" target="_blank" title="Netmusic">
                            <i class="iconfont icon-wangyiyunyinle1" aria-hidden="true"></i>
                          </a>
                 
                        <a class="social-icon" href="/atom.xml" target="_blank" title="rss">
                            <i class="iconfont icon-rss" aria-hidden="true"></i>
                          </a>
                 
            </div>
     
</header>

    

  <div id="recent-posts">
    
      <div class="recent-post-item">
          <div class="post-title ">
            <a href="/redis%E9%94%AE%E7%A9%BA%E9%97%B4/">redisé”®ç©ºé—´</a>
          </div>
          <div class="post-meta">
            
            
              <div class="post-meta-item date">
                <span title="Created 2020.08.30"><i class="far fa-calendar-alt"></i> 2020.08.30</span>
              </div>
              <div class="post-meta-item updated">
                <span title="Updated 2021.04.02"><i class="far fa-calendar-check"></i> 2021.04.02</span>
              </div>
             
             
            
             <div class="post-meta-item wordcount">
                
                  <i class="fas fa-pencil-alt"></i> <span class="post-count">471 words</span>
                   
                
                  <i class="far fa-clock"></i> <span class="post-count">1 min</span>
                                       
              </div>
             
        </div>
          <div class="content">
            
                  <h1 id="Redisé”®ç©ºé—´"><a href="#Redisé”®ç©ºé—´" class="headerlink" title="Redisé”®ç©ºé—´"></a>Redisé”®ç©ºé—´</h1><h2 id="ä¸€ï¼Œä»€ä¹ˆæ˜¯Redisé”®ç©ºé—´"><a href="#ä¸€ï¼Œä»€ä¹ˆæ˜¯Redisé”®ç©ºé—´" class="headerlink" title="ä¸€ï¼Œä»€ä¹ˆæ˜¯Redisé”®ç©ºé—´"></a>ä¸€ï¼Œä»€ä¹ˆæ˜¯Redisé”®ç©ºé—´</h2><ul>
<li>å®¢æˆ·ç«¯å¯ä»¥é€šè¿‡è®¢é˜…é¢‘é“æˆ–æ¨¡å¼ï¼Œ æ¥æ¥æ”¶é‚£äº›ä»¥æŸç§æ–¹å¼æ”¹åŠ¨äº† Redis æ•°æ®é›†çš„äº‹ä»¶<h2 id="äºŒï¼Œåº”ç”¨åœºæ™¯"><a href="#äºŒï¼Œåº”ç”¨åœºæ™¯" class="headerlink" title="äºŒï¼Œåº”ç”¨åœºæ™¯"></a>äºŒï¼Œåº”ç”¨åœºæ™¯</h2></li>
<li>æ¯”å¦‚æ‰“è½¦ç±»è½¯ä»¶æˆ–è€…æ·˜å®ï¼Œå¯¹æŸä¸ªç”¨æˆ·æˆ–è€…å•†å“è¿›è¡Œè¯„ä»·ï¼Œåœ¨è§„å®šçš„æ—¶é—´é‡Œç”¨æˆ·æ²¡æœ‰ç»™äºˆè¯„ä»·é‚£ä¹ˆç³»ç»Ÿå°±ä¼šè‡ªåŠ¨è¿›è¡Œè¯„ä»·ï¼Œå¯ä»¥ç†è§£ä¸ºè¿™ä¸ªkeyè¿‡æœŸäº†ã€‚<h2 id="ä¸‰ï¼Œä»£ç å®ç°"><a href="#ä¸‰ï¼Œä»£ç å®ç°" class="headerlink" title="ä¸‰ï¼Œä»£ç å®ç°"></a>ä¸‰ï¼Œä»£ç å®ç°</h2><h3 id="æƒ³è¦å¼€å¯é”®ç©ºé—´é€šçŸ¥å¿…é¡»å¾—è¿›è¡Œå¯¹notify-keyspace-eventsè¿›è¡Œé…ç½®"><a href="#æƒ³è¦å¼€å¯é”®ç©ºé—´é€šçŸ¥å¿…é¡»å¾—è¿›è¡Œå¯¹notify-keyspace-eventsè¿›è¡Œé…ç½®" class="headerlink" title="æƒ³è¦å¼€å¯é”®ç©ºé—´é€šçŸ¥å¿…é¡»å¾—è¿›è¡Œå¯¹notify-keyspace-eventsè¿›è¡Œé…ç½®"></a>æƒ³è¦å¼€å¯é”®ç©ºé—´é€šçŸ¥å¿…é¡»å¾—è¿›è¡Œå¯¹notify-keyspace-eventsè¿›è¡Œé…ç½®</h3></li>
<li>notify-keyspace-events ä¸ºç©ºå­—ç¬¦ä¸²æ—¶ï¼Œé”®ç©ºé—´é€šçŸ¥å…³é—­</li>
<li>å½“ç»™notify-keyspace-events è®¾å€¼æ—¶ï¼Œè¡¨ç¤ºé”®ç©ºé—´é€šçŸ¥å¼€å¯</li>
</ul>
<p>è¿™æ˜¯å¯¹notify-keyspace-eventsçš„ç›¸å…³å•Šé…ç½®</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">K &amp; é”®ç©ºé—´é€šçŸ¥ï¼Œæ‰€æœ‰é€šçŸ¥ä»¥ `__keyspace@<span class="tag">&lt;<span class="name">db</span>&gt;</span>__` ä¸ºå‰ç¼€</span><br><span class="line"></span><br><span class="line">E &amp; é”®äº‹ä»¶é€šçŸ¥ï¼Œæ‰€æœ‰é€šçŸ¥ä»¥ `__keyevent@<span class="tag">&lt;<span class="name">db</span>&gt;</span>__` ä¸ºå‰ç¼€</span><br><span class="line"></span><br><span class="line">g &amp; DEL ã€ EXPIRE ã€ RENAME ç­‰ç±»å‹æ— å…³çš„é€šç”¨å‘½ä»¤çš„é€šçŸ¥</span><br><span class="line"></span><br><span class="line">$ &amp; å­—ç¬¦ä¸²å‘½ä»¤çš„é€šçŸ¥</span><br><span class="line"></span><br><span class="line">l &amp; åˆ—è¡¨å‘½ä»¤çš„é€šçŸ¥</span><br><span class="line"></span><br><span class="line">s &amp; é›†åˆå‘½ä»¤çš„é€šçŸ¥</span><br><span class="line"></span><br><span class="line">h &amp; å“ˆå¸Œå‘½ä»¤çš„é€šçŸ¥</span><br><span class="line"></span><br><span class="line">z &amp; æœ‰åºé›†åˆå‘½ä»¤çš„é€šçŸ¥</span><br><span class="line"></span><br><span class="line">x &amp; è¿‡æœŸäº‹ä»¶ï¼šæ¯å½“æœ‰è¿‡æœŸé”®è¢«åˆ é™¤æ—¶å‘é€</span><br><span class="line"></span><br><span class="line">e &amp; é©±é€(evict)äº‹ä»¶ï¼šæ¯å½“æœ‰é”®å› ä¸º maxmemory æ”¿ç­–è€Œè¢«åˆ é™¤æ—¶å‘é€</span><br><span class="line"></span><br><span class="line">A &amp; å‚æ•° g$lshzxe çš„åˆ«åï¼Œå³all</span><br></pre></td></tr></table></figure>
<blockquote>
<p>æ³¨æ„ï¼šè¾“å…¥çš„å‚æ•°ä¸­è‡³å°‘è¦æœ‰ä¸€ä¸ª K æˆ–è€… E ï¼Œ å¦åˆ™çš„è¯ï¼Œ ä¸ç®¡å…¶ä½™çš„å‚æ•°æ˜¯ä»€ä¹ˆï¼Œ éƒ½ä¸ä¼šæœ‰ä»»ä½•é€šçŸ¥è¢«åˆ†å‘</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ redis-cli config set notify-keyspace-events KEA</span><br><span class="line">$ redis-cli --csv psubscribe &#39;__key*__:*&#39;</span><br><span class="line">Reading messages... (press Ctrl-C to quit)</span><br><span class="line">&quot;psubscribe&quot;,&quot;__key*__:*&quot;,1</span><br></pre></td></tr></table></figure>
<p>ç„¶ååœ¨å…¶ä»–ç»ˆç«¯å‘redisç»ˆç«¯å‘é€å‘½ä»¤å°±å¯ä»¥çœ‹åˆ°é€šçŸ¥äº†</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&quot;pmessage&quot;,&quot;__key*__:*&quot;,&quot;__keyspace@0__:foo&quot;,&quot;set&quot;</span><br><span class="line">&quot;pmessage&quot;,&quot;__key*__:*&quot;,&quot;__keyevent@0__:set&quot;,&quot;foo&quot;</span><br><span class="line">...</span><br></pre></td></tr></table></figure>
             
          </div>
        </div>
      <div class="post-footer">
        
    </div>
    
      <div class="recent-post-item">
          <div class="post-title ">
            <a href="/websell/">Webshellåœ¨æµè§ˆå™¨ä¸­å®ç°ç»ˆç«¯</a>
          </div>
          <div class="post-meta">
            
            
              <div class="post-meta-item date">
                <span title="Created 2020.08.30"><i class="far fa-calendar-alt"></i> 2020.08.30</span>
              </div>
              <div class="post-meta-item updated">
                <span title="Updated 2021.04.02"><i class="far fa-calendar-check"></i> 2021.04.02</span>
              </div>
             
             
            
             <div class="post-meta-item wordcount">
                
                  <i class="fas fa-pencil-alt"></i> <span class="post-count">436 words</span>
                   
                
                  <i class="far fa-clock"></i> <span class="post-count">1 min</span>
                                       
              </div>
             
        </div>
          <div class="content">
            
                  <h1 id="websell"><a href="#websell" class="headerlink" title="websell"></a>websell</h1><p>ä¸€ï¼Œæ¦‚å¿µï¼š</p>
<ul>
<li>ä»€ä¹ˆæ˜¯websellï¼š<ul>
<li>webshellå°±æ˜¯ä»¥aspã€phpã€jspæˆ–è€…cgiç­‰ç½‘é¡µæ–‡ä»¶å½¢å¼å­˜åœ¨çš„ä¸€ç§ä»£ç æ‰§è¡Œç¯å¢ƒï¼Œä¹Ÿå¯ä»¥å°†å…¶ç§°åšä¸ºä¸€ç§ç½‘é¡µåé—¨ã€‚é»‘å®¢åœ¨å…¥ä¾µäº†ä¸€ä¸ªç½‘ç«™åï¼Œé€šå¸¸ä¼šå°†aspæˆ–phpåé—¨æ–‡ä»¶ä¸ç½‘ç«™æœåŠ¡å™¨WEBç›®å½•ä¸‹æ­£å¸¸çš„ç½‘é¡µæ–‡ä»¶æ··åœ¨ä¸€èµ·ï¼Œç„¶åå°±å¯ä»¥ä½¿ç”¨æµè§ˆå™¨æ¥è®¿é—®aspæˆ–è€…phpåé—¨ï¼Œå¾—åˆ°ä¸€ä¸ªå‘½ä»¤æ‰§è¡Œç¯å¢ƒï¼Œä»¥è¾¾åˆ°æ§åˆ¶ç½‘ç«™æœåŠ¡å™¨çš„ç›®çš„ã€‚</li>
<li>ä»–æ˜¯ä¸€ä¸ªé›†æˆäº†ä¸€å †Linuxå‘½ä»¤çš„æ§åˆ¶å°ç•Œé¢</li>
</ul>
</li>
<li>sellçš„åˆ†ç±»ï¼š <ul>
<li>SHï¼šç¼–ç¨‹æ–¹é¢ç›¸å½“ä¼˜ç§€ï¼Œè¾“å…¥å‘½ä»¤ä¼˜ç§€</li>
<li>BASHï¼šLinuxç³»ç»Ÿä¸­çš„ä¸€ä¸ªé»˜è®¤shellï¼Œå‘½ä»¤å¤š</li>
</ul>
</li>
</ul>
<p>äºŒï¼Œåº”ç”¨åœºæ™¯ï¼š</p>
<ul>
<li>æ¯”å¦‚å®éªŒæ¥¼ï¼Œä»–å°±æ˜¯åœ¨æµè§ˆå™¨ä¸­å®ç°çš„é»‘çª—å£ï¼Œä¾›ç”¨æˆ·è¿›è¡Œå­¦ä¹ ä½¿ç”¨ï¼Œéå¸¸æ–¹ä¾¿</li>
</ul>
<p>ä¸‰ï¼Œä»£ç å®ç°ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å®‰è£…xterm</span></span><br><span class="line"> npm install xterm@<span class="number">3.1</span><span class="number">.0</span> --save</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åœ¨main.jsä¸­å¯¼å…¥cssæ ·å¼</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;xterm/dist/xterm.css&#x27;</span> </span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åœ¨ä½ å¯¹åº”çš„é¡µé¢ä¸Šæ”¾ä¸Šè¿™ä¸ªdivæ ‡ç­¾ï¼Œè¿™å°±æ˜¯é‚£ä¸ªé»‘çª—å£</span></span><br><span class="line">&lt;div id=<span class="string">&quot;terminal&quot;</span>&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; Terminal &#125; <span class="keyword">from</span> <span class="string">&#x27;xterm&#x27;</span></span><br><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> attach <span class="keyword">from</span> <span class="string">&#x27;xterm/lib/addons/attach/attach&#x27;</span> <span class="comment">// å®‰è£…æ’ä»¶é€‚ï¼Œå¯ä»¥ä½¿ç”¨attachå»æ·»åŠ </span></span><br><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> fit <span class="keyword">from</span> <span class="string">&#x27;xterm/lib/addons/fit/fit&#x27;</span> <span class="comment">// fitè¿›è¡Œè‡ªé€‚åº”å¤§å°çš„</span></span><br><span class="line"></span><br><span class="line">Terminal.applyAddon(attach) <span class="comment">// æ·»åŠ æ’ä»¶</span></span><br><span class="line">Terminal.applyAddon(fit) <span class="comment">// æ·»åŠ æ’ä»¶</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è·å–åˆ°äº†divæ ‡ç­¾</span></span><br><span class="line"><span class="keyword">let</span> terminalContainer = <span class="built_in">document</span>.getElementById(<span class="string">&#x27;terminal&#x27;</span>)</span><br><span class="line"><span class="comment">// åˆå§‹åŒ–é»‘çª—å£å¯¹è±¡</span></span><br><span class="line"><span class="built_in">this</span>.term = <span class="keyword">new</span> Terminal(<span class="built_in">this</span>.terminal)</span><br><span class="line"><span class="comment">// æ‰“å¼€è¿™ä¸ªå¯¹è±¡</span></span><br><span class="line"><span class="built_in">this</span>.term.open(terminalContainer)</span><br></pre></td></tr></table></figure>

<blockquote>
<p>è¿™å°±å®ç°äº†åœ¨æµè§ˆå™¨ä¸­å®ç°é»‘çª—å£ï¼Œå¦‚æœæƒ³å®Œå–„çš„è¯å¯ä»¥è¿æ¥dockerå®¹å™¨ï¼Œè¿™æ ·åªæ˜¯ä½ è‡ªå·±çš„äº‘ä¸»æœºï¼Œæƒ³çœ‹dockerå¯ä»¥å»æˆ‘ä¸‹ä¸€ç« åšå®¢</p>
</blockquote>

             
          </div>
        </div>
      <div class="post-footer">
        
    </div>
    
      <div class="recent-post-item">
          <div class="post-title ">
            <a href="/%E4%BA%91%E4%B8%BB%E6%9C%BACentOS7%E5%AE%89%E8%A3%85Mysql%E6%95%B0%E6%8D%AE%E5%BA%93/">äº‘ä¸»æœºå®‰è£…æ•°æ®åº“</a>
          </div>
          <div class="post-meta">
            
            
              <div class="post-meta-item date">
                <span title="Created 2020.08.30"><i class="far fa-calendar-alt"></i> 2020.08.30</span>
              </div>
              <div class="post-meta-item updated">
                <span title="Updated 2021.04.21"><i class="far fa-calendar-check"></i> 2021.04.21</span>
              </div>
             
             
            
             <div class="post-meta-item wordcount">
                
                  <i class="fas fa-pencil-alt"></i> <span class="post-count">910 words</span>
                   
                
                  <i class="far fa-clock"></i> <span class="post-count">4 min</span>
                                       
              </div>
             
        </div>
          <div class="content">
            
                  <p>å®‰è£…MySQL<br>åœ¨CentOSä¸­é»˜è®¤å®‰è£…æœ‰MariaDBï¼Œè¿™ä¸ªæ˜¯MySQLçš„åˆ†æ”¯ï¼Œä½†ä¸ºäº†éœ€è¦ï¼Œè¿˜æ˜¯è¦åœ¨ç³»ç»Ÿä¸­å®‰è£…MySQLï¼Œè€Œä¸”å®‰è£…å®Œæˆä¹‹åå¯ä»¥ç›´æ¥è¦†ç›–æ‰MariaDBã€‚</p>
<p>1.ä¸‹è½½å¹¶å®‰è£…MySQLå®˜æ–¹çš„ Yum Repository</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">wget -i -c http:&#x2F;&#x2F;dev.mysql.com&#x2F;get&#x2F;mysql57-community-release-el7-10.noarch.rpm</span><br><span class="line"></span><br><span class="line">2.yumå®‰è£…</span><br><span class="line"></span><br><span class="line">yum -y install mysql57-community-release-el7-10.noarch.rpm</span><br><span class="line">3.å®‰è£…MySQLæœåŠ¡å™¨, è¿™æ­¥å¯èƒ½ä¼šèŠ±äº›æ—¶é—´ï¼Œå®‰è£…å®Œæˆåå°±ä¼šè¦†ç›–æ‰ä¹‹å‰çš„mariadbã€‚</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">yum -y install mysql-community-server</span><br><span class="line">4.MySQLæ•°æ®åº“è®¾ç½®, é¦–å…ˆå¯åŠ¨mysqlæœåŠ¡å™¨</span><br><span class="line"></span><br><span class="line">systemctl start mysqld.service</span><br><span class="line"></span><br><span class="line">systemctl status mysqld.service  # æŸ¥çœ‹æœåŠ¡å™¨çŠ¶æ€</span><br><span class="line"></span><br><span class="line"># â— mysqld.service - MySQL Server</span><br><span class="line">#   Loaded: loaded (&#x2F;usr&#x2F;lib&#x2F;systemd&#x2F;system&#x2F;mysqld.service; enabled; vendor preset: disabled)</span><br><span class="line">   Active: active (running) since Wed 2021-03-31 18:57:38 CST; 1h 8min ago</span><br><span class="line">#      Docs: man:mysqld(8)</span><br><span class="line">#            http:&#x2F;&#x2F;dev.mysql.com&#x2F;doc&#x2F;refman&#x2F;en&#x2F;using-systemd.html</span><br><span class="line">#   Process: 3496 ExecStart&#x3D;&#x2F;usr&#x2F;sbin&#x2F;mysqld --daemonize --pid-file&#x3D;&#x2F;var&#x2F;run&#x2F;mysqld&#x2F;mysqld.pid $MYSQLD_OPTS (code&#x3D;exited, status&#x3D;0&#x2F;SUCCESS)</span><br><span class="line">#   Process: 3475 ExecStartPre&#x3D;&#x2F;usr&#x2F;bin&#x2F;mysqld_pre_systemd (code&#x3D;exited, status&#x3D;0&#x2F;SUCCESS)</span><br><span class="line">#  Main PID: 3500 (mysqld)</span><br><span class="line">#    CGroup: &#x2F;system.slice&#x2F;mysqld.service</span><br><span class="line">#            â””â”€3500 &#x2F;usr&#x2F;sbin&#x2F;mysqld --daemonize --pid-file&#x3D;&#x2F;var&#x2F;run&#x2F;mysqld&#x2F;mysqld.pid</span><br><span class="line"></span><br><span class="line"># Mar 31 18:57:37 iz2zeio2pnjhu6acetcrilz systemd[1]: Starting MySQL Server...</span><br><span class="line"># Mar 31 18:57:38 iz2zeio2pnjhu6acetcrilz systemd[1]: Started MySQL Server.</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">5.æ‰¾å‡ºæ­¤æ—¶rootç”¨æˆ·çš„å¯†ç </span><br><span class="line">grep &quot;password&quot; &#x2F;var&#x2F;log&#x2F;mysqld.log</span><br><span class="line"></span><br><span class="line"># 2021-03-31T07:40:25.106445Z 1 [Note] A temporary password is generated for root@localhost: GWmqHjoou4;D</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">6.è¿›å…¥æ•°æ®åº“å¹¶ä¿®æ”¹å¯†ç </span><br><span class="line">mysql -uroot -p  # å¯†ç ä¸ºåˆå§‹å¯†ç : GWmqHjoou4;D</span><br><span class="line"></span><br><span class="line"># ä¿®æ”¹å¯†ç </span><br><span class="line">ALTER USER &#39;root&#39;@&#39;localhost&#39; IDENTIFIED BY &#39;new password&#39;;  </span><br><span class="line"># å…¶ä¸­â€˜new passwordâ€™æ›¿æ¢æˆä½ è¦è®¾ç½®çš„å¯†ç ï¼Œæ³¨æ„:å¯†ç è®¾ç½®å¿…é¡»è¦å¤§å°å†™å­—æ¯æ•°å­—å’Œç‰¹æ®Šç¬¦å·ï¼ˆ,&#x2F;&#39;;:ç­‰ï¼‰,ä¸ç„¶ä¸èƒ½é…ç½®æˆåŠŸ</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">7.å¼€å¯mysqlçš„è¿œç¨‹è®¿é—®</span><br><span class="line"># æ‰§è¡Œä»¥ä¸‹å‘½ä»¤å¼€å¯è¿œç¨‹è®¿é—®é™åˆ¶ï¼ˆæ³¨æ„ï¼šä¸‹é¢å‘½ä»¤å¼€å¯çš„IPæ˜¯127.0.0.0ï¼‰</span><br><span class="line">grant all privileges on *.* to &#39;root&#39;@&#39;127.0.0.0&#39; identified by &#39;password&#39; with grant option;</span><br><span class="line"># å¦‚è¦å¼€å¯æ‰€æœ‰çš„ï¼Œç”¨%ä»£æ›¿IP</span><br><span class="line">grant all privileges on *.* to &#39;root&#39;@&#39;%&#39; identified by &#39;password&#39; with grant option;</span><br><span class="line"># passwordä¸ºæ•°æ®åº“å¯†ç </span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">8.æ‰§è¡Œå‘½ä»¤</span><br><span class="line">flush privileges; </span><br><span class="line"></span><br><span class="line">exit</span><br></pre></td></tr></table></figure>
<p>9.ä¸ºfirewalldæ·»åŠ å¼€æ”¾ç«¯å£<br>å¦‚æœä½ æ˜¯é˜¿é‡Œäº‘äº‘ç«¯æœåŠ¡å™¨, ä¸redisä¸€æ ·éœ€è¦å¯¹é˜²ç«å¢™è¿›è¡Œè®¾ç½®, å¼€æ”¾ç«¯å£3306<br>è‹¥ä¸æ˜¯æ·»åŠ mysqlç«¯å£3306å’ŒTomcatç«¯å£8080</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# firewall-cmd --zone&#x3D;public --add-port&#x3D;3306&#x2F;tcp --permanent</span><br><span class="line">[root@localhost ~]# firewall-cmd --zone&#x3D;public --add-port&#x3D;8080&#x2F;tcp --permanent</span><br><span class="line"></span><br><span class="line"># ç„¶åå†é‡æ–°è½½å…¥</span><br><span class="line">[root@localhost ~]# firewall-cmd --reload</span><br></pre></td></tr></table></figure>

<p>10.æ›´æ”¹mysqlçš„è¯­è¨€</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">é‡æ–°ç™»å½•mysqlï¼Œç„¶åè¾“å…¥statusï¼š</span><br><span class="line">Snipaste_2021-03-31_20-41-11.jpg</span><br><span class="line">å¯ä»¥çœ‹åˆ°ï¼Œç»¿è‰²ç®­å¤´å¤„ä¸æ˜¯utf-8</span><br><span class="line">å› æ­¤æˆ‘ä»¬å…ˆé€€å‡ºmysqlï¼Œç„¶åå†åˆ°~, etcç›®å½•ä¸‹çš„my.cnfæ–‡ä»¶ä¸‹ä¿®æ”¹ä¸€ä¸‹æ–‡ä»¶å†…å®¹</span><br><span class="line"></span><br><span class="line">[root@localhost ~]# vi &#x2F;etc&#x2F;my.cnf</span><br><span class="line">è¿›å…¥æ–‡ä»¶åï¼Œæ–°å¢å››è¡Œä»£ç </span><br><span class="line"></span><br><span class="line">[client]  # ç¬¬ä¸€è¡Œ</span><br><span class="line">default-character-set&#x3D;utf8  # ç¬¬äºŒè¡Œ</span><br><span class="line"># For advice on how to change settings please see</span><br><span class="line"># http:&#x2F;&#x2F;dev.mysql.com&#x2F;doc&#x2F;refman&#x2F;5.7&#x2F;en&#x2F;server-configuration-defaults.html</span><br><span class="line"></span><br><span class="line">[mysqld]</span><br><span class="line">#</span><br><span class="line"># Remove leading # and set to the amount of RAM for the most important data</span><br><span class="line"># cache in MySQL. Start at 70% of total RAM for dedicated server, else 10%.</span><br><span class="line"># innodb_buffer_pool_size &#x3D; 128M</span><br><span class="line">#</span><br><span class="line"># Remove leading # to turn on a very important data integrity option: logging</span><br><span class="line"># changes to the binary log between backups.</span><br><span class="line"># log_bin</span><br><span class="line">#</span><br><span class="line"># Remove leading # to set options mainly useful for reporting servers.</span><br><span class="line"># The server defaults are faster for transactions and fast SELECTs.</span><br><span class="line"># Adjust sizes as needed, experiment to find the optimal values.</span><br><span class="line"># join_buffer_size &#x3D; 128M</span><br><span class="line"># sort_buffer_size &#x3D; 2M</span><br><span class="line"># read_rnd_buffer_size &#x3D; 2M</span><br><span class="line">datadir&#x3D;&#x2F;var&#x2F;lib&#x2F;mysql</span><br><span class="line">socket&#x3D;&#x2F;var&#x2F;lib&#x2F;mysql&#x2F;mysql.sock</span><br><span class="line">character-set-server&#x3D;utf8   # ç¬¬ä¸‰è¡Œ</span><br><span class="line">collation-server&#x3D;utf8_general_ci  # ç¬¬å››è¡Œ</span><br><span class="line"></span><br><span class="line"># Disabling symbolic-links is recommended to prevent assorted security risks</span><br><span class="line">symbolic-links&#x3D;0</span><br><span class="line"></span><br><span class="line">log-error&#x3D;&#x2F;var&#x2F;log&#x2F;mysqld.log</span><br><span class="line">pid-file&#x3D;&#x2F;var&#x2F;run&#x2F;mysqld&#x2F;mysqld.pid</span><br></pre></td></tr></table></figure>
             
          </div>
        </div>
      <div class="post-footer">
        
    </div>
    
      <div class="recent-post-item">
          <div class="post-title ">
            <a href="/%E4%BA%91%E4%B8%BB%E6%9C%BACentOS7%E5%AE%89%E8%A3%85python3.6%E5%92%8CDjango/">äº‘ä¸»æœºå®‰è£…Python</a>
          </div>
          <div class="post-meta">
            
            
              <div class="post-meta-item date">
                <span title="Created 2020.08.30"><i class="far fa-calendar-alt"></i> 2020.08.30</span>
              </div>
              <div class="post-meta-item updated">
                <span title="Updated 2021.04.20"><i class="far fa-calendar-check"></i> 2021.04.20</span>
              </div>
             
             
            
             <div class="post-meta-item wordcount">
                
                  <i class="fas fa-pencil-alt"></i> <span class="post-count">380 words</span>
                   
                
                  <i class="far fa-clock"></i> <span class="post-count">1 min</span>
                                       
              </div>
             
        </div>
          <div class="content">
            
                  <h3 id="è¿›å…¥å®˜ç½‘"><a href="#è¿›å…¥å®˜ç½‘" class="headerlink" title="è¿›å…¥å®˜ç½‘"></a>è¿›å…¥å®˜ç½‘</h3><ul>
<li><p>æ‹¿å–ä¸‹è½½åœ°å€ï¼š<a target="_blank" rel="noopener" href="https://www.python.org/">https://www.python.org/</a></p>
<ul>
<li>  <a target="_blank" rel="noopener" href="https://www.python.org/ftp/python/3.7.5/Python-3.7.5.tar.xz">https://www.python.org/ftp/python/3.7.5/Python-3.7.5.tar.xz</a></li>
</ul>
</li>
<li><p>åˆ°äº‘ä¸»æœºä¸‹è½½</p>
<ul>
<li>  wgetï¼šä¸‹è½½æŸä¸ªé“¾æ¥ä¸Šçš„èµ„æº</li>
</ul>
</li>
<li><p>  è¿›å…¥homeç›®å½•</p>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cd home&#x2F;     # è¿›å…¥ç›®å½•</span><br><span class="line">mkdir tools  # åˆ›å»ºç›®å½•</span><br><span class="line">wget https:&#x2F;&#x2F;www.python.org&#x2F;ftp&#x2F;python&#x2F;3.7.5&#x2F;Python-3.7.5.tar.xz  # åœ¨è¯¥ç›®å½•ä¸‹ä¸‹è½½python3çš„å‹ç¼©æ–‡ä»¶</span><br></pre></td></tr></table></figure>

<blockquote>
<p>  è¿‡ç¨‹ä¸­å‘ç°ä¸‹è½½å¤ªæ…¢äº†ï¼Œå®åœ¨å—ä¸äº†äº†ï¼Œå¯ä»¥æœ¬åœ°å…ˆä¸‹è½½ï¼Œç„¶åä¸Šä¼ ï¼Œæ¨èä½¿ç”¨filezillaå·¥å…·</p>
</blockquote>
<ul>
<li>  è§£å‹xzæ ¼å¼</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">xz -d Python-3.7.5.tar.xz </span><br></pre></td></tr></table></figure>

<ul>
<li>  æ‰“å¼€tarå½’æ¡£æ¨¡å¼</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tar xvf Python-3.7.5.tar </span><br></pre></td></tr></table></figure>

<ul>
<li>  å®‰è£…ä¾èµ–</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo yum install zlib-devel bzip2-devel openssl-devel ncurses-devel sqlite-devel readline-devel tk-devel gdbm-devel db4-devel libpcap-devel xz-devel</span><br></pre></td></tr></table></figure>

<ul>
<li>  è¿›å…¥ç›®å½•</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd Python-3.7.5</span><br></pre></td></tr></table></figure>

<ul>
<li>  åˆ›å»ºä¸€ä¸ªpythonçš„å®‰è£…ç›®å½•</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkdir &#x2F;usr&#x2F;local&#x2F;python37</span><br></pre></td></tr></table></figure>

<ul>
<li>  é…ç½®å®‰è£…é€‰é¡¹ï¼Œå®‰è£…pythonåˆ°python37ç›®å½•ä¸‹</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">.&#x2F;configure --prefix&#x3D;&#x2F;usr&#x2F;local&#x2F;python37</span><br></pre></td></tr></table></figure>

<ul>
<li>  æ‰§è¡Œç¼–è¯‘</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">make </span><br></pre></td></tr></table></figure>

<ul>
<li>  æ‰§è¡Œå®‰è£…</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">make install </span><br></pre></td></tr></table></figure>

<hr>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Successfully installed pip-19.2.3 setuptools-41.2.0</span><br></pre></td></tr></table></figure>

<ul>
<li>  æ„å»ºè½¯è¿æ¥</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ln -s &#x2F;usr&#x2F;local&#x2F;python37&#x2F;bin&#x2F;python3 &#x2F;usr&#x2F;bin&#x2F;python3</span><br></pre></td></tr></table></figure>

<hr>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ln -s &#x2F;usr&#x2F;local&#x2F;python37&#x2F;bin&#x2F;pip3 &#x2F;usr&#x2F;bin&#x2F;pip3</span><br></pre></td></tr></table></figure>

<ul>
<li></li>
<li>  å®‰è£…django</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip3 install django&#x3D;&#x3D;2.0.4 -i https:&#x2F;&#x2F;pypi.tuna.tsinghua.edu.cn&#x2F;simple</span><br></pre></td></tr></table></figure>

<blockquote>
<p>  è™½ç„¶å®‰è£…å¥½äº†djangoï¼Œä½†æ˜¯ä»–å±…ç„¶ä¸èƒ½ç”¨ï¼Œè¿™æ˜¯å› ä¸ºä»–ä¹Ÿå¾—éœ€è¦è®¾ç½®è½¯è¿æ¥ </p>
</blockquote>
<ul>
<li>  è®¾ç½®django-adminçš„è½¯è¿æ¥</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ln -s &#x2F;usr&#x2F;local&#x2F;python37&#x2F;bin&#x2F;django-admin &#x2F;usr&#x2F;bin&#x2F;django-admin</span><br></pre></td></tr></table></figure>


             
          </div>
        </div>
      <div class="post-footer">
        
    </div>
    
      <div class="recent-post-item">
          <div class="post-title ">
            <a href="/%E4%BA%91%E4%B8%BB%E6%9C%BA%E5%AE%89%E8%A3%85redis%E6%95%B0%E6%8D%AE%E5%BA%93/">äº‘ä¸»æœºå®‰è£…redisæ•°æ®åº“</a>
          </div>
          <div class="post-meta">
            
            
              <div class="post-meta-item date">
                <span title="Created 2020.08.30"><i class="far fa-calendar-alt"></i> 2020.08.30</span>
              </div>
              <div class="post-meta-item updated">
                <span title="Updated 2021.04.02"><i class="far fa-calendar-check"></i> 2021.04.02</span>
              </div>
             
             
            
             <div class="post-meta-item wordcount">
                
                  <i class="fas fa-pencil-alt"></i> <span class="post-count">630 words</span>
                   
                
                  <i class="far fa-clock"></i> <span class="post-count">3 min</span>
                                       
              </div>
             
        </div>
          <div class="content">
            
                  <p>1.å®‰è£…redisæ•°æ®åº“</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install redis</span><br></pre></td></tr></table></figure>



<p>2.ä¸‹è½½fedoraçš„epelä»“åº“</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install epel-release</span><br></pre></td></tr></table></figure>





<p>3.å¯åŠ¨redisæœåŠ¡</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl start redis</span><br></pre></td></tr></table></figure>
<p>4.æŸ¥çœ‹redisçŠ¶æ€</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl status redis</span><br></pre></td></tr></table></figure>


<p>åœæ­¢æœåŠ¡</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl stop redis </span><br></pre></td></tr></table></figure>


<p>é‡å¯æœåŠ¡</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl restart redis</span><br></pre></td></tr></table></figure>

<p>5.æŸ¥çœ‹redisè¿›ç¨‹</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ps -ef |grep redis</span><br></pre></td></tr></table></figure>



<p>6.è®¾ç½®å¼€æœºè‡ªå¯åŠ¨</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl enable redis</span><br></pre></td></tr></table></figure>



<p>7.å¼€æ”¾ç«¯å£å· (è‹¥ç«¯å£å·²å¼€æ”¾æ­¤æ­¥å¯çœç•¥ï¼Œå¯å…ˆ8å7)</p>
<p>Â </p>
<p>linux æ“ä½œé˜²ç«å¢™:Â linuxå¼€æ”¾é˜²ç«å¢™ç«¯å£</p>
<p>Â </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">firewall-cmd --zone&#x3D;public --add-port&#x3D;80&#x2F;tcp --permanent</span><br><span class="line">firewall-cmd --zone&#x3D;public --add-port&#x3D;6379&#x2F;tcp --permanent</span><br></pre></td></tr></table></figure>
<p>æ³¨æ„ï¼š80ç«¯å£æ˜¯å¿…é¡»è¦å¼€æ”¾çš„</p>
<p>é‡å¯é˜²ç«å¢™ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl restart firewalld</span><br></pre></td></tr></table></figure>
<p>8.æŸ¥çœ‹ç«¯å£ ï¼ˆè‹¥æ­¤å‘½ä»¤æ— æ•ˆå¯ç™¾åº¦è‡ªè¡Œå®‰è£…ï¼‰</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">netstat -lnp|grep 6379</span><br></pre></td></tr></table></figure>
<p>9.è®¾ç½®redis è¿œç¨‹è¿æ¥å’Œå¯†ç </p>
<p>è¾“å…¥å‘½ä»¤è¿›å…¥ç¼–è¾‘æ¨¡å¼</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">vi &#x2F;etc&#x2F;redis.conf</span><br><span class="line"></span><br></pre></td></tr></table></figure>


<p>å°†è¿™éƒ¨æ³¨é‡Šæ‰ï¼Œå¦åˆ™åªæœ‰æœ¬æœºæ‰èƒ½è®¿é—® Â bind 127.0.0.1Â </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">##################################NETWORK#####################################</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Â Â  Â Â Â  Â # IF YOU ARE SURE YOU WANT YOUR INSTANCE TO LISTEN TO ALL THE INTERFACES</span><br><span class="line">Â Â  Â Â Â  Â # JUST COMMENT THE FOLLOWING LINE.</span><br><span class="line">Â Â  Â Â Â  Â # ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~</span><br><span class="line">Â Â  Â Â Â  Â #bind 127.0.0.1</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Â Â  Â Â Â  Â # Protected mode is a layer of security protection, in order to avoid that</span><br><span class="line">Â Â  Â Â Â  Â # Redis instances left open on the internet are accessed and exploited.</span><br><span class="line"> Â Â Â  Â </span><br><span class="line">Â Â  Â 9.2 Â Â  Â ä¿æŠ¤æ¨¡å¼ä¿®æ”¹ä¸ºno</span><br><span class="line">Â Â  Â Â Â  Â #bind 127.0.0.1</span><br><span class="line">Â Â  Â Â Â  Â # Protected mode is a layer of security protection, in order to avoid that</span><br><span class="line">Â Â  Â Â Â  Â # Redis instances left open on the internet are accessed and exploited.</span><br><span class="line">Â Â  Â Â Â  Â #</span><br><span class="line">Â Â  Â Â Â  Â # When protected mode is on and if:</span><br><span class="line">Â Â  Â Â Â  Â #</span><br><span class="line">Â Â  Â Â Â  Â # 1) The server is not binding explicitly to a set of addresses using the</span><br><span class="line">Â Â  Â Â Â  Â # Â  Â &quot;bind&quot; directive.</span><br><span class="line">Â Â  Â Â Â  Â # 2) No password is configured.</span><br><span class="line">Â Â  Â Â Â  Â #</span><br><span class="line">Â Â  Â Â Â  Â # The server only accepts connections from clients connecting from the</span><br><span class="line">Â Â  Â Â Â  Â # IPv4 and IPv6 loopback addresses 127.0.0.1 and ::1, and from Unix domain</span><br><span class="line">Â Â  Â Â Â  Â # sockets.</span><br><span class="line">Â Â  Â Â Â  Â #</span><br><span class="line">Â Â  Â Â Â  Â # By default protected mode is enabled. You should disable it only if</span><br><span class="line">Â Â  Â Â Â  Â # you are sure you want clients from other hosts to connect to Redis</span><br><span class="line">Â Â  Â Â Â  Â # even if no authentication is configured, nor a specific set of interfaces</span><br><span class="line">Â Â  Â Â Â  Â # are explicitly listed using the &quot;bind&quot; directive.</span><br><span class="line">Â Â  Â Â Â  Â protected-mode no</span><br></pre></td></tr></table></figure>



<p>Â Â  Â 9.3Â Â  Â Â Â  Â å¦‚æœä¿®æ”¹ç«¯å£å·ï¼Œä¿®æ”¹è¿™é‡Œå°±å¯ä»¥äº†ï¼Œæœ¬æ–‡é»˜è®¤6379ç«¯å£<br>Â <figure class="highlight plain"><figcaption><span>no</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line">Â Â  Â Â Â  Â # Accept connections on the specified port, default is 6379 (IANA #815344).</span><br><span class="line">Â Â  Â Â Â  Â # If port 0 is specified Redis will not listen on a TCP socket.</span><br><span class="line">Â Â  Â Â Â  Â port 6379</span><br><span class="line"></span><br></pre></td></tr></table></figure></p>
<p>Â Â  Â 9.4Â Â  Â Â Â  Â ä¿®æ”¹å¯†ç ä¸º 111111</p>
<p>Â  Â  Â  Â  Â  Â è¿™ä¸ªå¯†ç ä¸ºç™»é™†redisæ‰€éœ€è¦çš„å¯†ç ï¼Œè¯·è®°å¥½</p>
<p>Â Â  Â Â Â  Â ################################## SECURITY ###################################<br>Â Â  Â Â Â  Â # Warning: since Redis is pretty fast an outside user can try up to<br>Â Â  Â Â Â  Â # 150k passwords per second against a good box. This means that you should<br>Â Â  Â Â Â  Â # use a very strong password otherwise it will be very easy to break.<br>Â Â  Â Â Â  Â #<br>Â Â  Â Â Â  Â requirepass 111111
Â Â  Â Â Â  Â </p>
<p>10.ä¿å­˜å¹¶é€€å‡ºç¼–è¾‘é‡å¯redis</p>
<p>systemctl restart redis</p>
<p>11.è¿›å…¥redis</p>
<p>Â  Â  11.1ï¼šå‘½ä»¤ï¼š</p>
<p>redis-cli -h 127.0.0.1 -p 6379</p>
<p>Â Â  Â 11.2ï¼šè¾“å…¥ç”¨æˆ·åå’Œå¯†ç  auth 111111</p>
<p>Â  Â  è¿”å›OK<br>Â  Â  11.3ï¼šç„¶åå†è¾“å…¥Â Â  Â info</p>
<p>12.è·å–å½“å‰çš„dbæ•°Â </p>
<p>config get databases</p>
<p>æˆ–è€…</p>
<p>empty list or setÂ  ä»£è¡¨çš„æ˜¯å½“å‰æ•°æ®ä¸ºç©ºï¼Œä¸å½±å“</p>
<p>Â  13.åˆ‡æ¢æŒ‡å®šdbÂ  select 1Â  (å¯ä¸º0-15)</p>

             
          </div>
        </div>
      <div class="post-footer">
        
    </div>
    
      <div class="recent-post-item">
          <div class="post-title ">
            <a href="/%E5%8D%9A%E5%AE%A2%E7%BE%8E%E5%8C%96%E2%80%94%E2%80%94Silence%E4%B8%BB%E9%A2%98%E7%9A%AE%E8%82%A4/">åšå®¢ç¾åŒ–â€”â€”Silenceä¸»é¢˜çš®è‚¤</a>
          </div>
          <div class="post-meta">
            
            
              <div class="post-meta-item date">
                <span title="Created 2020.08.30"><i class="far fa-calendar-alt"></i> 2020.08.30</span>
              </div>
              <div class="post-meta-item updated">
                <span title="Updated 2021.03.17"><i class="far fa-calendar-check"></i> 2021.03.17</span>
              </div>
             
            
              <div class="post-meta-item categories">
                
                  <i class="fas fa-inbox article-meta__icon"></i> <a href="/categories/%E5%8D%9A%E5%AE%A2%E5%9B%AD%E5%8D%9A%E6%96%87/">åšå®¢å›­åšæ–‡</a>
                
                  <i class="fas fa-inbox article-meta__icon"></i> <a href="/categories/%E5%8D%9A%E5%AE%A2%E5%9B%AD%E5%8D%9A%E6%96%87/%E5%8D%9A%E5%AE%A2%E7%BE%8E%E5%8C%96/">åšå®¢ç¾åŒ–</a>
                
              </div>
             
            
             <div class="post-meta-item wordcount">
                
                  <i class="fas fa-pencil-alt"></i> <span class="post-count">805 words</span>
                   
                
                  <i class="far fa-clock"></i> <span class="post-count">3 min</span>
                                       
              </div>
             
        </div>
          <div class="content">
            
                  <h2 id="ä»‹ç»"><a href="#ä»‹ç»" class="headerlink" title="ä»‹ç»"></a>ä»‹ç»</h2><p>&emsp;&emsp;ä¸€æ¬¾ä¸“æ³¨é˜…è¯»çš„åšå®¢å›­ä¸»é¢˜ï¼Œä¸»è¦é¢å‘äºç»å¸¸æ··è¿¹ åšå®¢å›­ çš„æœ‹å‹ã€‚å…¶è¿½æ±‚å¤§é“è‡³ç®€çš„ç»ˆæçœŸç†ï¼Œç•Œé¢è¿½æ±‚ç®€æ´ã€è¿è¡Œè¿½æ±‚é«˜æ•ˆã€éƒ¨ç½²è¿½æ±‚ç®€å•ã€‚</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://github.com/glassy-sky-lisong/SilenceSkin">åšå®¢çš®è‚¤æºç åœ°å€</a></li>
<li><a target="_blank" rel="noopener" href="https://www.cnblogs.com/esofar">é¢„è§ˆåœ°å€</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/esofar/cnblogs-theme-silence/blob/master/docs/deploy.md">å¦‚ä½•éƒ¨ç½²ã€ä½¿ç”¨çš®è‚¤</a></li>
<li><a target="_blank" rel="noopener" href="https://www.cnblogs.com/esofar/p/cnblogs-theme-silence.html">Silenceä½œè€…çš„å‹é“¾</a></li>
</ul>
<h2 id="ç‰¹ç‚¹"><a href="#ç‰¹ç‚¹" class="headerlink" title="ç‰¹ç‚¹"></a>ç‰¹ç‚¹</h2><ul>
<li>ç®€æ´ä¼˜é›…ã€ç²¾è‡´æ¼‚äº®çš„ UI è®¾è®¡</li>
<li>æä¾›å¤šç§é£æ ¼ä¸»é¢˜ä»¥ä¾¿é€‚åº”å„ç±»ç”¨æˆ·çš„åå¥½</li>
<li>å“åº”å¼è®¾è®¡ï¼Œå…¼å®¹æ‰‹æœºç«¯æµè§ˆå™¨</li>
<li>æä¾›äº‹æ— å·¨ç»†çš„éƒ¨ç½²æ–‡æ¡£</li>
<li>æºç ç»“æ„æ¸…æ™°å¹¶ä¸”æ³¨é‡Šå®Œæ•´ï¼Œæ–¹ä¾¿æ‰©å±•</li>
</ul>
<h2 id="å¼€å‘"><a href="#å¼€å‘" class="headerlink" title="å¼€å‘"></a>å¼€å‘</h2><p>&emsp;&emsp;è¯·å…ˆç¡®ä¿æ‚¨æ­£åœ¨ä½¿ç”¨çš„æœºå™¨å·²ç»å®‰è£… Node.js å’Œ Git å®¢æˆ·ç«¯ã€‚</p>
<pre><code> git clone https://github.com/esofar/cnblogs-theme-silence.git   # å…‹éš†æºç 
 cd cnblogs-theme-silence                                        # è¿›å…¥é¡¹ç›®
 npm install                                                     # å®‰è£…ä¾èµ–
 npm run build
</code></pre>
<p>&emsp;&emsp;å¦‚æœæ²¡æœ‰å®‰è£…nodeã€‚jsæˆ–è€…ä¸ä¼šä½¿ç”¨çš„ç«¥é‹å¯ä»¥åœ¨æˆ‘çš„GitHubï¼Œä¹Ÿå°±æ˜¯åšå®¢çš®è‚¤æºç åœ°å€ä¸­ã€‚</p>
<h2 id="éƒ¨ç½²"><a href="#éƒ¨ç½²" class="headerlink" title="éƒ¨ç½²"></a>éƒ¨ç½²</h2><p>&emsp;&emsp;é‡ç‚¹éƒ¨ç½²ä¹‹å‰ä½¿ç”¨åšå®¢å›­çš„cutormçš®è‚¤ï¼Œå…·ä½“éƒ¨ç½²ç»†èŠ‚è¯·è¯¦è§â€™å¦‚ä½•éƒ¨ç½²ã€ä½¿ç”¨çš®è‚¤â€™ï¼Œå¦‚æœåˆä¸ä¼šçš„è¯å¯ä»¥çœ‹ä¸€çœ‹æˆ‘çš„é…ç½®ä½œä¸ºå‚è€ƒï¼ˆä»…ä½œä¸ºå‚è€ƒï¼Œæ‰¾ä¸å›æ¥åˆ«å“­é¼»å­ï¼‰<br><em><strong>CSS</strong></em></p>
<pre><code>&lt;!-- æº¢å‡ºéšè—è®¾ç½®ï¼ˆæ”¾ç½®åœ¨ç®¡ç†--&gt; è®¾ç½®--&gt; cssæ¨¡å—ä¸­ï¼‰ --&gt;
#topics, #mainContent &#123;
    overflow: visible;
&#125;
.cnblogs-markdown .hljs&#123;
    display:block;
    color:#333;
    overflow-x:auto;
    background:#F2F4F5!important;
    border:none!important;
    font-family:Consolas,Monaco,&#39;Andale Mono&#39;,&#39;Ubuntu Mono&#39;,monospace!important;
    padding:1em!important;
    font-size:14px!important
    &#125;
</code></pre>
<p><em><strong>ä¾§è¾¹æ å…¬å‘Š</strong></em></p>
<pre><code>&lt;!-- åœ¨ç®¡ç†--&gt; è®¾ç½®-&gt; ä¾§è¾¹æ å…¬å‘Š(æ”¯æŒjsä»£ç ã€æ”¯æŒhtmlä»£ç ) --&gt;
&lt;script src=&quot;https://blog-static.cnblogs.com/files/glassysky/silence.min.js&quot;&gt;&lt;/script&gt;
&lt;script type=&quot;text/javascript&quot;&gt;
    $.silence(&#123;
        profile: &#123;
            enable: true,
            avatar: &#39;https://gitee.com/glassyskyforgame/glassysky/blob/master/4c67d1a20cf431ade2873e284836acaf2fdd989e.jpg&#39;,
            favicon: &#39;https://gitee.com/glassyskyforgame/glassysky/raw/master/4c67d1a20cf431ade2873e284836acaf2fdd989e.jpg&#39;,
        &#125;,
        catalog: &#123;
            enable: true,
            move: true,
            index: true,
            level1: &#39;h2&#39;,
            level2: &#39;h3&#39;,
            level3: &#39;h4&#39;,
        &#125;,
        signature: &#123;
            enable: true,
            home: &#39;https://www.cnblogs.com/glassysky/&#39;,
            license: &#39;ç½²å 4.0 å›½é™…&#39;,
            link: &#39;https://creativecommons.org/licenses/by/4.0&#39;
        &#125;,
        reward: &#123;
            enable: true,
            title: &#39;æ„Ÿè°¢å°å¯çˆ±æŠ•é£Ÿ&#39;,
            wechat: &#39;https://images.cnblogs.com/cnblogs_com/esofar/972540/o_wechat.png&#39;,
            alipay: &#39;https://images.cnblogs.com/cnblogs_com/esofar/972540/o_alipay.png&#39;
        &#125;,
        github: &#123;
            enable: true,
            color: &#39;#fff&#39;,
            fill: null,
            link: &#39;https://github.com/glassy-sky-lisong&#39;
        &#125;
    &#125;);
&lt;/script&gt;
&lt;!--å¤–ç½®ä¸»é¢˜cssè¡¥ä¸--&gt;
&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;https://blog-static.cnblogs.com/files/glassysky/sli.css&quot;/&gt;
</code></pre>
<p><em><strong>ä¼šåŠ¨çš„title</strong></em></p>
<pre><code>&lt;!-- åŠ¨æ€titlejs --&gt;
&lt;script&gt; var OriginTitle = document.title; var titleTime; document.addEventListener(&#39;visibilitychange&#39;, function () &#123; if                 
(document.hidden) &#123; document.title = &#39;â•­(Â°AÂ°`)â•® é¡µé¢å´©æºƒå•¦ ~&#39;; clearTimeout(titleTime); &#125; else &#123; document.title = &#39;(à¸…&gt;Ï‰&lt;*à¸…) å™«åˆ    
å¥½äº†~&#39; + OriginTitle; titleTime = setTimeout(function () &#123; document.title = OriginTitle; &#125;, 2000); &#125; &#125;); &lt;/script&gt;
</code></pre>
<p><em><strong>å›¾ç‰‡æ”¾å¤§åŠŸèƒ½</strong></em></p>
<pre><code>&lt;!--å›¾ç‰‡æ”¾å¤§çš„zoomcsså’Œjs--&gt;
&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;https://blog-static.cnblogs.com/files/glassysky/zoom.css&quot;/&gt;
&lt;script src=&quot;https://blog-static.cnblogs.com/files/glassysky/zoom.js&quot;&gt;&lt;/script&gt;
&lt;!-- Bootstrap çš„ transition.js cdnï¼ˆè¿‡æ¸¡åŠ¨ç”»æ’ä»¶ï¼‰--&gt;
&lt;script type=&quot;text/javascript&quot;&gt;$(&#39;#cnblogs_post_body img&#39;).attr(&#39;data-action&#39;, &#39;zoom&#39;);&lt;/script&gt;
</code></pre>
<h2 id="åšå®¢çš„çš®è‚¤é£æ ¼"><a href="#åšå®¢çš„çš®è‚¤é£æ ¼" class="headerlink" title="åšå®¢çš„çš®è‚¤é£æ ¼"></a>åšå®¢çš„çš®è‚¤é£æ ¼</h2><ul>
<li>ç®€çº¦Â·è“<br><img src= "/img/hhj.png" data-src="https://github.com/esofar/cnblogs-theme-silence/raw/master/docs/theme_default.png" alt="img1"> </li>
<li>æš—é»‘Â·ç»¿<br><img src= "/img/hhj.png" data-src="https://github.com/esofar/cnblogs-theme-silence/raw/master/docs/theme_dark.png" alt="img2"></li>
<li>å¥³ç¥Â·ç²‰<br><img src= "/img/hhj.png" data-src="https://github.com/esofar/cnblogs-theme-silence/raw/master/docs/theme_goddess.png" alt="img3">  </li>
</ul>

             
          </div>
        </div>
      <div class="post-footer">
        
    </div>
    
      <div class="recent-post-item">
          <div class="post-title ">
            <a href="/%E7%9B%B4%E6%92%ADflv/">æµè§ˆå™¨ä¸­å®ç°ç›´æ’­</a>
          </div>
          <div class="post-meta">
            
            
              <div class="post-meta-item date">
                <span title="Created 2020.08.30"><i class="far fa-calendar-alt"></i> 2020.08.30</span>
              </div>
              <div class="post-meta-item updated">
                <span title="Updated 2021.04.02"><i class="far fa-calendar-check"></i> 2021.04.02</span>
              </div>
             
             
            
             <div class="post-meta-item wordcount">
                
                  <i class="fas fa-pencil-alt"></i> <span class="post-count">865 words</span>
                   
                
                  <i class="far fa-clock"></i> <span class="post-count">3 min</span>
                                       
              </div>
             
        </div>
          <div class="content">
            
                  <h1 id="è§†é¢‘ç›´æ’­"><a href="#è§†é¢‘ç›´æ’­" class="headerlink" title="è§†é¢‘ç›´æ’­"></a>è§†é¢‘ç›´æ’­</h1><h3 id="ä¸€ï¼Œæ¦‚å¿µéƒ¨åˆ†"><a href="#ä¸€ï¼Œæ¦‚å¿µéƒ¨åˆ†" class="headerlink" title="ä¸€ï¼Œæ¦‚å¿µéƒ¨åˆ†"></a>ä¸€ï¼Œæ¦‚å¿µéƒ¨åˆ†</h3><h3 id="è§†é¢‘ç›´æ’­åˆ†ä¸ºå‡ éƒ¨åˆ†"><a href="#è§†é¢‘ç›´æ’­åˆ†ä¸ºå‡ éƒ¨åˆ†" class="headerlink" title="è§†é¢‘ç›´æ’­åˆ†ä¸ºå‡ éƒ¨åˆ†"></a>è§†é¢‘ç›´æ’­åˆ†ä¸ºå‡ éƒ¨åˆ†</h3><ul>
<li><p>æ¨æµï¼š</p>
<ul>
<li>å°±æ˜¯å°†ä½ ç°åœ¨ç›´æ’­çš„å†…å®¹åˆ†æˆå¥½å‡ æ®µä¸€æ®µä¸€æ®µçš„æ‰“åŒ…å¥½ï¼Œæ ¼å¼æ˜¯.flv<br>è¿™ä¸ªflvæ ¼å¼çš„æ¯”è¾ƒç®€å•è½»é‡ï¼ŒåŠ è½½é€Ÿåº¦å¿«ï¼Œæ’­æ”¾ä¹Ÿå¿«<br>è¿™é‡Œæˆ‘ä½¿ç”¨çš„è½¯ä»¶æ˜¯OBSï¼Œä¸‹è½½åœ°å€æ˜¯ï¼š<a target="_blank" rel="noopener" href="https://obsproject.com/zh-cn">https://obsproject.com/zh-cn</a>   </li>
</ul>
</li>
<li><p>æ‹‰æµï¼š</p>
<ul>
<li>å°±æ˜¯æ‹‰å–æ‰“åŒ…å¥½çš„è§†é¢‘å°†å®ƒæ‹¼æ¥èµ·æ¥æ’­æ”¾ç»™ç”¨æˆ·ï¼Œè¿™é‡Œæˆ‘ç”¨çš„æ˜¯Vlcï¼Œä¸‹è½½åœ°å€æ˜¯ <a target="_blank" rel="noopener" href="https://www.videolan.org/vlc/">https://www.videolan.org/vlc/</a><br>è¿™é‡Œå‘¢ï¼Œæˆ‘æ˜¯ç”¨çš„HTTP-FLVç›´æ’­åè®®<h3 id="HTTP-FLVçš„ä¼˜ç¼ºç‚¹"><a href="#HTTP-FLVçš„ä¼˜ç¼ºç‚¹" class="headerlink" title="HTTP-FLVçš„ä¼˜ç¼ºç‚¹"></a>HTTP-FLVçš„ä¼˜ç¼ºç‚¹</h3></li>
</ul>
</li>
<li><p>ä¼˜ç‚¹: </p>
<ul>
<li>å¯ä»¥ç›´æ¥é€šè¿‡httpåè®®è¿›è¡Œä¼ è¾“ï¼Œhttpå±äºå…¬å…±åè®®ï¼Œå…¬å…±ç«¯å£ï¼š80<br>htmlæ’­æ”¾è§†é¢‘å°±å¾ˆç®€å•ï¼Œ video<br>æ”¯æŒåŠ å¯†ï¼Œä½¿ç”¨https<br>å…¼å®¹ç§»åŠ¨ç«¯è®¾å¤‡ï¼Œæ¯”å¦‚ï¼šå®‰å“ã€ios</li>
</ul>
</li>
<li><p>ç¼ºç‚¹: </p>
<ul>
<li>ä¼šç¼“å­˜ç›´æ’­æ•°æ®ï¼Œä¿å­˜ç›´æ’­ä¼ è¾“è¿‡æ¥çš„ä¸€æ®µæ®µflvæ–‡ä»¶ï¼Œéšç§ä¿å¯†ä¸å¥½<br>ä¸èƒ½åœ¨å¤§å¹¶å‘æƒ…å†µä¸‹ä½¿ç”¨<br>äºŒï¼Œåº”ç”¨åœºæ™¯<br>å…¶å®è¿™ä¸ªè§†é¢‘ç›´æ’­åœ¨å¾ˆå¤šå¤§å¹³å°è™ç‰™ï¼Œæ–—é±¼ï¼ŒæŠ–éŸ³ï¼Œå¿«æ‰‹ç­‰ç­‰ï¼Œéƒ½æ˜¯æœ‰è¿™ä¸ªåŠŸèƒ½çš„ã€‚æ¯”å¦‚ä½ çš„é¡¹ç›®éœ€è¦ç”¨åˆ°ç›´æ’­ï¼ŒçœŸäººè®²è§£å°±å¯ä»¥åº”ç”¨è¿™ä¸ªã€‚</li>
</ul>
</li>
</ul>
<p>ä¸‰ï¼Œä»£ç å®ç°</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">mkdir /usr/local/nginx-flv</span><br><span class="line"># åˆ›å»ºäº†ä¸€ä¸ªå®‰è£…ç›®å½•</span><br><span class="line">mkdir /home/flv-tools</span><br><span class="line"># å­˜å‚¨æ‰€éœ€è½¯ä»¶</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ä¸‹è½½è¿™ä¸ªæ–‡ä»¶</span></span><br><span class="line">wget https://nginx.org/download/nginx-<span class="number">1.18</span><span class="number">.0</span>.tar.gz</span><br><span class="line">git clone https://github.com/winshining/nginx-http-flv-module</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è§£å‹è¿™ä¸¤ä¸ªæ–‡ä»¶</span></span><br><span class="line">tar -zxvf nginx-<span class="number">1.18</span><span class="number">.0</span>.tar.gz nginx-<span class="number">1.18</span><span class="number">.0</span></span><br><span class="line">unzip nginx-http-flv-module.<span class="built_in">zip</span></span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># é…ç½®æ–‡ä»¶</span></span><br><span class="line">cd nginx-<span class="number">1.18</span><span class="number">.0</span></span><br><span class="line">./configure --prefix=/usr/local/nginx-flv --add-module=/home/flv-tools/nginx-http-flv-module-master</span><br><span class="line"><span class="comment"># --prefix: é…ç½®å®‰è£…è·¯å¾„</span></span><br><span class="line"><span class="comment">#--add-module: æ·»åŠ å®‰è£…æ’ä»¶</span></span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ç¼–è¯‘åŠå®‰è£…</span></span><br><span class="line">make </span><br><span class="line">make install </span><br><span class="line">make &amp;&amp; make install </span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å¯¹é…ç½®æ–‡ä»¶è¿›è¡Œä¿®æ”¹</span></span><br><span class="line">worker_processes  <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">rtmp_auto_push on;</span><br><span class="line">rtmp_auto_push_reconnect 1s;</span><br><span class="line">rtmp_socket_dir /tmp;</span><br><span class="line"></span><br><span class="line">rtmp&#123;</span><br><span class="line">	out_queue <span class="number">4096</span>;</span><br><span class="line">	out_cork <span class="number">8</span>;</span><br><span class="line">	max_streams <span class="number">128</span>;</span><br><span class="line">	timeout 15s;</span><br><span class="line">	drop_idle_publisher 15s;</span><br><span class="line">	log_interval 5s;</span><br><span class="line">	log_size 1m;</span><br><span class="line">	server &#123;</span><br><span class="line">		listen <span class="number">1935</span>; <span class="comment"># æ¨æµç«¯å£</span></span><br><span class="line">		server_name zege;</span><br><span class="line">		</span><br><span class="line">		application live &#123;	<span class="comment"># é…ç½®æ¨æµåœ°å€</span></span><br><span class="line">			live on; <span class="comment"># æ‰“å¼€æ¨æµ</span></span><br><span class="line">			<span class="comment"># gop_cache on;</span></span><br><span class="line">			<span class="comment"># rtmp://123.123.123.123:1935/live/test</span></span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">events &#123;</span><br><span class="line">    worker_connections  <span class="number">1024</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># é…ç½®æ–‡ä»¶httpæ‹‰æµéƒ¨åˆ†</span></span><br><span class="line">http &#123;</span><br><span class="line">	include       mime.types;</span><br><span class="line">	default_type  application/octet-stream;</span><br><span class="line">	sendfile        on;</span><br><span class="line">	keepalive_timeout  <span class="number">65</span>;</span><br><span class="line">	server &#123;</span><br><span class="line">		listen       <span class="number">8080</span>; <span class="comment"># æ‹‰æµé€šè¿‡8080å»æ‹‰æµ</span></span><br><span class="line">		<span class="comment"># http://123.123.123.123:8080/live/?port=1935&amp;stream=test</span></span><br><span class="line">		server_name  localhost;</span><br><span class="line">		location /live &#123;</span><br><span class="line">			flv_live on;</span><br><span class="line">			chunked_transfer_encoding  on;</span><br><span class="line">			add_header <span class="string">&#x27;Access-Control-Allow-Origin&#x27;</span> <span class="string">&#x27;*&#x27;</span>;</span><br><span class="line">			add_header <span class="string">&#x27;Access-Control-Allow-Credentials&#x27;</span> <span class="string">&#x27;true&#x27;</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="å¿…é¡»ç¡®ä¿æœåŠ¡å¼€å¯ï¼Œè¿˜æœ‰é˜¿é‡Œäº‘çš„é˜²ç«å¢™ï¼Œè¿™ä¸ªå¾ˆé‡è¦"><a href="#å¿…é¡»ç¡®ä¿æœåŠ¡å¼€å¯ï¼Œè¿˜æœ‰é˜¿é‡Œäº‘çš„é˜²ç«å¢™ï¼Œè¿™ä¸ªå¾ˆé‡è¦" class="headerlink" title="å¿…é¡»ç¡®ä¿æœåŠ¡å¼€å¯ï¼Œè¿˜æœ‰é˜¿é‡Œäº‘çš„é˜²ç«å¢™ï¼Œè¿™ä¸ªå¾ˆé‡è¦"></a>å¿…é¡»ç¡®ä¿æœåŠ¡å¼€å¯ï¼Œè¿˜æœ‰é˜¿é‡Œäº‘çš„é˜²ç«å¢™ï¼Œè¿™ä¸ªå¾ˆé‡è¦</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å…³é—­æœåŠ¡</span></span><br><span class="line">/usr/local/nginx-rtmp/sbin/nginx -s stop</span><br><span class="line"><span class="comment"># é‡å¯æœåŠ¡</span></span><br><span class="line">/usr/local/nginx-rtmp/sbin/nginx -s reload</span><br><span class="line"><span class="comment"># æ‰“å¼€æœåŠ¡</span></span><br><span class="line">/usr/local/nginx-flv/sbin/nginx -c /usr/local/nginx-flv/conf/nginx.conf</span><br></pre></td></tr></table></figure>

<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åœ¨è½¯ä»¶ä¸­è®¾ç½®æ¨æµåœ°å€å’Œæ‹‰æµåœ°å€</span></span><br><span class="line">rtmp://ï¼ˆè‡ªå·±çš„äº‘ä¸»æœºç«¯å£ï¼‰:<span class="number">1935</span>/live/test</span><br><span class="line"></span><br><span class="line">http://(è‡ªå·±äº‘ä¸»æœºç«¯å£):8080/live?port=1935&amp;app=live&amp;stream=test</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æœ€ååœ¨vueä¸­å®ç°æ‹‰æµ</span></span><br><span class="line"><span class="comment">// ä¸‹è½½ä¾èµ–</span></span><br><span class="line">cnpm install flv.js --save</span><br><span class="line"><span class="comment">// åœ¨éœ€è¦çš„é¡µé¢å¯¼åŒ…</span></span><br><span class="line"><span class="keyword">import</span> flv <span class="keyword">from</span> <span class="string">&#x27;flv.js&#x27;</span>;</span><br><span class="line"><span class="comment">// æ„å»ºæ’­æ”¾æ ‡ç­¾</span></span><br><span class="line">&lt;video id=<span class="string">&quot;videoElement&quot;</span> controls muted&gt;</span><br><span class="line">  	</span><br><span class="line">&lt;/video&gt;</span><br><span class="line"><span class="comment">// è¿›è¡Œåˆå§‹åŒ–</span></span><br><span class="line">  <span class="function"><span class="title">mounted</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> videoElement = <span class="built_in">document</span>.getElementById(<span class="string">&#x27;videoElement&#x27;</span>);</span><br><span class="line">    <span class="keyword">var</span> flvPlayer = flv.createPlayer(&#123;</span><br><span class="line">      type: <span class="string">&#x27;flv&#x27;</span>,</span><br><span class="line">      enableWorker: <span class="literal">true</span>,     <span class="comment">//æµè§ˆå™¨ç«¯å¼€å¯flv.jsçš„worker,å¤šè¿›ç¨‹è¿è¡Œflv.js</span></span><br><span class="line">      isLive: <span class="literal">true</span>,           <span class="comment">//ç›´æ’­æ¨¡å¼</span></span><br><span class="line">      hasAudio: <span class="literal">false</span>,        <span class="comment">//å…³é—­éŸ³é¢‘</span></span><br><span class="line">      hasVideo: <span class="literal">true</span>,</span><br><span class="line">      <span class="comment">// cors: true,</span></span><br><span class="line">      stashInitialSize: <span class="number">128</span>,</span><br><span class="line">      enableStashBuffer: <span class="literal">false</span>, <span class="comment">//æ’­æ”¾flvæ—¶ï¼Œè®¾ç½®æ˜¯å¦å¯ç”¨æ’­æ”¾ç¼“å­˜ï¼Œåªåœ¨ç›´æ’­èµ·ä½œç”¨ã€‚</span></span><br><span class="line">      url: <span class="string">&#x27;http://ï¼ˆè‡ªå·±äº‘ä¸»æœºç«¯å£ï¼‰/live?port=1935&amp;app=live&amp;stream=test&#x27;</span></span><br><span class="line">    &#125;)</span><br><span class="line">    flvPlayer.attachMediaElement(videoElement);</span><br><span class="line">    flvPlayer.load();</span><br><span class="line">    flvPlayer.play();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
             
          </div>
        </div>
      <div class="post-footer">
        
    </div>
    
      <div class="recent-post-item">
          <div class="post-title ">
            <a href="/%E6%B5%8B%E8%AF%95%E5%88%86%E7%B1%BB/">æµ‹è¯•åˆ†ç±»</a>
          </div>
          <div class="post-meta">
            
            
              <div class="post-meta-item date">
                <span title="Created 2020.08.25"><i class="far fa-calendar-alt"></i> 2020.08.25</span>
              </div>
              <div class="post-meta-item updated">
                <span title="Updated 2021.03.17"><i class="far fa-calendar-check"></i> 2021.03.17</span>
              </div>
             
            
              <div class="post-meta-item categories">
                
                  <i class="fas fa-inbox article-meta__icon"></i> <a href="/categories/Hexo/">Hexo</a>
                
              </div>
             
            
             <div class="post-meta-item wordcount">
                
                  <i class="fas fa-pencil-alt"></i> <span class="post-count">7 words</span>
                   
                
                  <i class="far fa-clock"></i> <span class="post-count">1 min</span>
                                       
              </div>
             
        </div>
          <div class="content">
            
                  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">è¿™æ˜¯ä¸€ä¸ªæµ‹è¯•</span><br></pre></td></tr></table></figure>

             
          </div>
        </div>
      <div class="post-footer">
        
    </div>
    
      <div class="recent-post-item">
          <div class="post-title ">
            <a href="/%E6%94%AF%E4%BB%98%E5%AE%9D%E4%B8%89%E6%96%B9%E6%94%AF%E4%BB%98%E6%B5%81%E7%A8%8B/">æ”¯ä»˜å®ä¸‰æ–¹æ”¯ä»˜æµç¨‹</a>
          </div>
          <div class="post-meta">
            
            
              <div class="post-meta-item date">
                <span title="Created 2020.07.02"><i class="far fa-calendar-alt"></i> 2020.07.02</span>
              </div>
              <div class="post-meta-item updated">
                <span title="Updated 2021.04.02"><i class="far fa-calendar-check"></i> 2021.04.02</span>
              </div>
             
             
            
             <div class="post-meta-item wordcount">
                
                  <i class="fas fa-pencil-alt"></i> <span class="post-count">516 words</span>
                   
                
                  <i class="far fa-clock"></i> <span class="post-count">2 min</span>
                                       
              </div>
             
        </div>
          <div class="content">
            
                  <h1 id="æ”¯ä»˜å®ä¸‰æ–¹æ”¯ä»˜"><a href="#æ”¯ä»˜å®ä¸‰æ–¹æ”¯ä»˜" class="headerlink" title="æ”¯ä»˜å®ä¸‰æ–¹æ”¯ä»˜"></a>æ”¯ä»˜å®ä¸‰æ–¹æ”¯ä»˜</h1><h3 id="ä¸€-ä¸‹è½½ä¸€ä¸ªæ”¯ä»˜å®å¼€æ”¾å¹³å°å¼€å‘åŠ©æ‰‹ç”Ÿæˆç§˜é’¥"><a href="#ä¸€-ä¸‹è½½ä¸€ä¸ªæ”¯ä»˜å®å¼€æ”¾å¹³å°å¼€å‘åŠ©æ‰‹ç”Ÿæˆç§˜é’¥" class="headerlink" title="ä¸€,ä¸‹è½½ä¸€ä¸ªæ”¯ä»˜å®å¼€æ”¾å¹³å°å¼€å‘åŠ©æ‰‹ç”Ÿæˆç§˜é’¥"></a>ä¸€,ä¸‹è½½ä¸€ä¸ªæ”¯ä»˜å®å¼€æ”¾å¹³å°å¼€å‘åŠ©æ‰‹ç”Ÿæˆç§˜é’¥</h3><h3 id="è¿›å…¥-https-www-alipay-com-å¹¶ç™»é™†-ç„¶åæ³¨å†Œä¸€ä¸ªæ²™ç®±"><a href="#è¿›å…¥-https-www-alipay-com-å¹¶ç™»é™†-ç„¶åæ³¨å†Œä¸€ä¸ªæ²™ç®±" class="headerlink" title="è¿›å…¥ https://www.alipay.com/ å¹¶ç™»é™†,ç„¶åæ³¨å†Œä¸€ä¸ªæ²™ç®±"></a>è¿›å…¥ <a target="_blank" rel="noopener" href="https://www.alipay.com/">https://www.alipay.com/</a> å¹¶ç™»é™†,ç„¶åæ³¨å†Œä¸€ä¸ªæ²™ç®±</h3><h3 id="ä¸‹è½½-pip-install-python-alipay-sdk-â€“upgrade-æ¨¡å—"><a href="#ä¸‹è½½-pip-install-python-alipay-sdk-â€“upgrade-æ¨¡å—" class="headerlink" title="ä¸‹è½½ pip install python-alipay-sdk â€“upgrade æ¨¡å—"></a>ä¸‹è½½ pip install python-alipay-sdk â€“upgrade æ¨¡å—</h3><p>æµç¨‹å›¾:<br><img src= "/img/hhj.png" data-src="https://i.loli.net/2021/01/30/QElYTGVxfKyX9P5.png" alt="æ”¯ä»˜å®æ”¯ä»˜æµç¨‹å›¾.png"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment"># å°†åˆšä¸‹è½½çš„æ¨¡å—ä¸­å¯¼å‡ºéœ€è¦ç”¨çš„åŒ…</span></span><br><span class="line"><span class="keyword">from</span> alipay <span class="keyword">import</span> AliPay</span><br><span class="line"><span class="keyword">from</span> alipay.utils <span class="keyword">import</span> AliPayConfig</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¼€å‘ä¸€ä¸ªæ”¯ä»˜æ¥å£</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AlipayView</span>(<span class="params">APIView</span>):</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">post</span>(<span class="params">self, request</span>):</span></span><br><span class="line">        sn = request.data.get(<span class="string">&quot;sn&quot;</span>)</span><br><span class="line">        total = request.data.get(<span class="string">&quot;total&quot;</span>)</span><br><span class="line">        <span class="comment"># è·å–ç§˜é’¥ä¿¡æ¯</span></span><br><span class="line">        app_private_key_string = <span class="built_in">open</span>(<span class="string">&quot;buyapp/alipay/app_private_key.txt&quot;</span>).read()</span><br><span class="line">        alipay_public_key_string = <span class="built_in">open</span>(<span class="string">&quot;buyapp/alipay/alipay_public_key.txt&quot;</span>).read()</span><br><span class="line"></span><br><span class="line">        alipay = AliPay(</span><br><span class="line">            appid=<span class="string">&quot;2016101600696807&quot;</span>,</span><br><span class="line">            app_notify_url=<span class="literal">None</span>,  <span class="comment"># é»˜è®¤å›è°ƒurl</span></span><br><span class="line">            app_private_key_string=app_private_key_string,</span><br><span class="line">            <span class="comment"># æ”¯ä»˜å®çš„å…¬é’¥ï¼ŒéªŒè¯æ”¯ä»˜å®å›ä¼ æ¶ˆæ¯ä½¿ç”¨ï¼Œä¸æ˜¯ä½ è‡ªå·±çš„å…¬é’¥,</span></span><br><span class="line">            alipay_public_key_string=alipay_public_key_string,</span><br><span class="line">            sign_type=<span class="string">&quot;RSA2&quot;</span>,  <span class="comment"># RSA æˆ–è€… RSA2</span></span><br><span class="line">            debug=<span class="literal">True</span>,  <span class="comment"># é»˜è®¤False</span></span><br><span class="line">            config=AliPayConfig(timeout=<span class="number">15</span>)  <span class="comment"># å¯é€‰, è¯·æ±‚è¶…æ—¶æ—¶é—´</span></span><br><span class="line">        )</span><br><span class="line"></span><br><span class="line">        <span class="comment"># å¦‚æœä½ æ˜¯ Python 3çš„ç”¨æˆ·ï¼Œä½¿ç”¨é»˜è®¤çš„å­—ç¬¦ä¸²å³å¯</span></span><br><span class="line">        subject = <span class="string">&quot;é˜¿æ­£å•†åŸè®¢å•æ”¯ä»˜&quot;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># ç”µè„‘ç½‘ç«™æ”¯ä»˜ï¼Œéœ€è¦è·³è½¬åˆ°https://openapi.alipay.com/gateway.do? + order_string</span></span><br><span class="line">        order_string = alipay.api_alipay_trade_page_pay(</span><br><span class="line">            out_trade_no=sn,  <span class="comment"># è®¢å•å·</span></span><br><span class="line">            total_amount=total,  <span class="comment"># æ€»é‡‘é¢</span></span><br><span class="line">            subject=subject,  <span class="comment"># æ ‡é¢˜</span></span><br><span class="line">            return_url=<span class="string">&quot;http://localhost:8000/api/v1/buy/pay_callback&quot;</span>,</span><br><span class="line">            <span class="comment"># notify_url=&quot;https://example.com/notify&quot;  # å¯é€‰, ä¸å¡«åˆ™ä½¿ç”¨é»˜è®¤notify url</span></span><br><span class="line">        )</span><br><span class="line"></span><br><span class="line">        <span class="comment"># ç”Ÿæˆä¸€ä¸ªæ”¯ä»˜è¶…é“¾æ¥ï¼Œè¿”å›ç»™vueç«¯ï¼Œ ç‚¹å‡»å°±æ¿€æ´»è¿™ä¸ªè¶…é“¾æ¥</span></span><br><span class="line">        url = <span class="string">&quot;https://openapi.alipaydev.com/gateway.do?&quot;</span> + order_string</span><br><span class="line">        <span class="keyword">return</span> Response(&#123;<span class="string">&quot;url&quot;</span>: url&#125;)</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è®¾ç½®å›è°ƒåœ°å€</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AliPayBackView</span>(<span class="params">View</span>):</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get</span>(<span class="params">self, request</span>):</span></span><br><span class="line">        user = request.user</span><br><span class="line">        <span class="comment"># è·å–å›è°ƒçš„ä¿¡æ¯</span></span><br><span class="line">        <span class="comment"># è·å– è®¢å•å·</span></span><br><span class="line">        sn = request.GET.get(<span class="string">&quot;out_trade_no&quot;</span>)</span><br><span class="line">        <span class="comment">#  è·å– æ”¯ä»˜å®äº¤æ˜“å·</span></span><br><span class="line">        trade_no = request.GET.get(<span class="string">&quot;trade_no&quot;</span>)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;sn:&quot;</span>, sn)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;trade_no:&quot;</span>, trade_no)</span><br><span class="line">        <span class="comment"># æ‰¾åˆ°è¿™ä¸ªè®¢å• å¹¶æ›´æ–°çŠ¶æ€</span></span><br><span class="line">        <span class="comment"># ä¿®æ”¹äº†  è®¢å•çŠ¶æ€  å¹¶æ·»åŠ äº† æ”¯ä»˜å®äº¤æ˜“å·</span></span><br><span class="line">        Order.objects.<span class="built_in">filter</span>(sn=sn).update(trade_no=trade_no, status=<span class="number">2</span>)</span><br><span class="line">        <span class="comment">#  åˆ é™¤æˆ‘ä»¬è´­ç‰©è½¦ä¸­çš„ å·²ç»æ”¯ä»˜æˆåŠŸçš„è´­ç‰©ä¿¡æ¯</span></span><br><span class="line">        <span class="built_in">print</span>(user)</span><br><span class="line">        <span class="comment"># æŸ¥è¯¢æ‰€æœ‰çš„é€‰ä¸­ ç„¶ååˆ é™¤</span></span><br><span class="line">        gid_set = r.smembers(<span class="string">&quot;select_%d&quot;</span> % user.<span class="built_in">id</span>)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;gid_set:&quot;</span>, gid_set)</span><br><span class="line">        <span class="keyword">for</span> gid <span class="keyword">in</span> gid_set:</span><br><span class="line">            r.hdel(<span class="string">&quot;cart_%d&quot;</span> % user.<span class="built_in">id</span>, gid)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> redirect(<span class="string">&quot;http://127.0.0.1:8080/#/paysuccess?trade_no=&quot;</span> + trade_no)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="æœ€åé…ç½®è·¯ç”±å³å¯"><a href="#æœ€åé…ç½®è·¯ç”±å³å¯" class="headerlink" title="æœ€åé…ç½®è·¯ç”±å³å¯"></a>æœ€åé…ç½®è·¯ç”±å³å¯</h3>
             
          </div>
        </div>
      <div class="post-footer">
        
    </div>
    
      <div class="recent-post-item">
          <div class="post-title ">
            <a href="/celery%E5%BC%82%E6%AD%A5/">celeryå¼‚æ­¥æ¡ˆä¾‹</a>
          </div>
          <div class="post-meta">
            
            
              <div class="post-meta-item date">
                <span title="Created 2020.04.30"><i class="far fa-calendar-alt"></i> 2020.04.30</span>
              </div>
              <div class="post-meta-item updated">
                <span title="Updated 2021.04.02"><i class="far fa-calendar-check"></i> 2021.04.02</span>
              </div>
             
             
            
             <div class="post-meta-item wordcount">
                
                  <i class="fas fa-pencil-alt"></i> <span class="post-count">345 words</span>
                   
                
                  <i class="far fa-clock"></i> <span class="post-count">1 min</span>
                                       
              </div>
             
        </div>
          <div class="content">
            
                  <h1 id="celeryå¼‚æ­¥æ¡†æ¶"><a href="#celeryå¼‚æ­¥æ¡†æ¶" class="headerlink" title="celeryå¼‚æ­¥æ¡†æ¶"></a>celeryå¼‚æ­¥æ¡†æ¶</h1><p>ä¸€ï¼Œceleryæ˜¯ä»€ä¹ˆï¼Ÿ</p>
<ul>
<li>celeryæ˜¯ä¸€ä¸ªç®€å•ã€çµæ´»ï¼Œå¯é çš„ï¼Œå¤„ç†å¤§é‡æ¶ˆæ¯çš„åˆ†å¸ƒå¼ç³»ç»Ÿã€‚å®ƒä¸“æ³¨äºå®æ—¶å¤„ç†çš„å¼‚æ­¥ä»»åŠ¡é˜Ÿåˆ—ï¼ŒåŒæ—¶ä¹Ÿæ”¯æŒä»»åŠ¡è°ƒåº¦,celeryæ˜¯Pythonå®ç°çš„åˆ†å¸ƒå¼é˜Ÿåˆ—</li>
<li><a target="_blank" rel="noopener" href="http://docs.jinkan.org/docs/celery/">http://docs.jinkan.org/docs/celery/</a> ä¸­æ–‡ç‰ˆå®˜æ–¹æ–‡æ¡£</li>
</ul>
<p>äºŒï¼Œceleryçš„ç‰¹ç‚¹åŠåº”ç”¨åœºæ™¯ï¼š</p>
<ul>
<li>å¼€æºï¼Œé€Ÿåº¦å¿«ï¼Œé«˜å¯ç”¨ï¼Œçµæ´»</li>
<li>åº”ç”¨åœºæ™¯å°±æ˜¯æˆ‘ä»¬å¯¹äºä»£ç ä¸­è€—æ—¶é•¿çš„åŠŸèƒ½ï¼Œå¯ä»¥å¼‚æ­¥æ“ä½œï¼Œä¸å½±å“æˆ‘ä»¬å¯¹å®¢æˆ·ç«¯çš„å“åº”</li>
</ul>
<p>ä¸‰ï¼Œä»£ç å®ç°</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å®‰è£…ä¸‰ä¸ªåŒ…</span></span><br><span class="line"> pip install -U Celery</span><br><span class="line"> pip install redis</span><br><span class="line"> pip install eventlet</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åˆ›å»ºä¸€ä¸ªtasksæ–‡ä»¶åœ¨è¿™é‡Œé¢å®šä¹‰åˆå§‹åŒ–ä»»åŠ¡</span></span><br><span class="line"><span class="keyword">from</span> celery <span class="keyword">import</span> Celery</span><br><span class="line">app = Celery(<span class="string">&quot;taks&quot;</span>, broker=<span class="string">&quot;redis://localhost/1&quot;</span>)</span><br><span class="line"><span class="meta">@app.task()</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">sendSMS</span>(<span class="params">phone, code</span>):</span></span><br><span class="line">    <span class="comment"># å®šä¹‰ä½ è‡ªå·±çš„ä»»åŠ¡</span></span><br><span class="line">     <span class="keyword">return</span> a + b </span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è¿è¡Œcelery worker æœåŠ¡å™¨(çœ‹ä½ è‡ªå·±çš„app)</span></span><br><span class="line"> celery -A userapp.tasks worker --loglevel=INFO</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åœ¨viewè§†å›¾é‡Œè°ƒç”¨å¼‚æ­¥ä»»åŠ¡</span></span><br><span class="line"><span class="comment">#(ä»¥ä½ è‡ªå·±å®šä¹‰çš„å‡½æ•°åä¸ºå‡†)</span></span><br><span class="line"> sendSMS.delay()</span><br></pre></td></tr></table></figure>
<h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><ul>
<li>å®‰è£…ä¾èµ–å®Œä»¥å,å»è‡ªå·±çš„appä¸‹åˆ›å»ºä¸€ä¸ªæ–°çš„æ–‡ä»¶,åœ¨æ–‡ä»¶ä¸­å®šä¹‰ä¸€ä¸ªå‡½æ•°,è¿™ä¸ªå‡½æ•°é‡Œé¢å°†æ˜¯ä½ ç»™ä»–çš„ä»»åŠ¡,ç„¶åé€šè¿‡ celery -A è‡ªå·±appå.tasks worker â€“loglevel=INFO è¿™æ¡å‘½ä»¤æ¥å¯åŠ¨è¿™ä¸ªæœåŠ¡,æœ€ååœ¨ä½ çš„viewè§†å›¾é‡Œå¯¼åŒ…è°ƒç”¨è¿™ä¸ªå‡½æ•°å³å¯</li>
</ul>

             
          </div>
        </div>
      <div class="post-footer">
        
    </div>
    
  </div>



<nav class="paginator">
      
            <a class="prev" href="/">< Prev</a>
            
            
            <a class="next" href="/page/3/">Next ></a>
            
</nav>

    
<a id="gotop" href="javascript:" title="è¿”å›é¡¶éƒ¨"><i class="fa fa-arrow-up"></i></a>
    






    
<div id="bottom-outer">
    <div id="bottom-inner">
        Â© 2020 <i class="fa fa-heart" id="heart"></i> é˜¿æ­£ 
        <br>
        Powered by 
        <a target="_blank" rel="noopener" href="http://hexo.io">hexo</a> | Theme is <a target="_blank" rel="noopener" href="https://github.com/a2396837/hexo-theme-blank/">blank</a>
        
          <div class="icp-info">
            
          <a href="" target="_blank"> </a>
        </div>
        
    </div>  
  </div>
  
<script src="https://cdn.jsdelivr.net/npm/layui-src@2.5.5/dist/layui.min.js"></script>



  
    <script src="/js/script.js"></script>
  
    <script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script>
  

 



  <script>
    window.lazyLoadOptions = {
      elements_selector: 'img',
      threshold: 0
    }
</script>
<script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js"></script>   
  


  <script>
    var images = $('img').not('.nav-logo img').not('.card img').not($('a>img')).not('.reward-content img')
    images.each(function (i, o) {
      var lazyloadSrc = $(o).attr('data-src') ? $(o).attr('data-src') : $(o).attr('src')
      $(o).wrap(`<a href="${lazyloadSrc}" data-fancybox="group" data-caption="${$(o).attr('alt')}" class="fancybox"></a>`)
    })
  </script>
  <script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script>
  <script>
        $().fancybox({
      selector: '[data-fancybox]',
      loop: true,
      transitionEffect: 'slide',
      protect: true,
      buttons: ['slideShow', 'fullScreen', 'thumbs', 'close']
    })
  </script>   
  


  <script>
  if (!window.MathJax) {
    window.MathJax = {
      loader: {
        source: {
          '[tex]/amsCd': '[tex]/amscd'
        }
      },
      tex: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]],
        tags: 'ams'
      },
      options: {
        renderActions: {
          findScript: [10, doc => {
            for (const node of document.querySelectorAll('script[type^="math/tex"]')) {
              const display = !!node.type.match(/; *mode=display/)
              const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display)
              const text = document.createTextNode('')
              node.parentNode.replaceChild(text, node)
              math.start = {node: text, delim: '', n: 0}
              math.end = {node: text, delim: '', n: 0}
              doc.math.push(math)
            }
          }, '']
        }
      }
    }
    
    var script = document.createElement('script')
    script.src = "https://cdn.jsdelivr.net/npm/mathjax@3.0.1/es5/tex-mml-chtml.js"
    script.id = 'MathJax-script'
    script.async = true
    document.head.appendChild(script)
  } else {
    MathJax.startup.document.state(0)
    MathJax.texReset()
    MathJax.typeset()
  }
  </script>
  


  
<script>
if (document.getElementsByClassName('mermaid').length) {
    if (window.mermaidJsLoad) mermaid.init()
    else {
      $.getScript("https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js", function () {
        window.mermaidJsLoad = true
        mermaid.initialize({
          theme: "default",
        })
      })
    }
  }
  </script>
  




  
<div id="QPlayer">
	<div id="pContent">
		<div id="player">
			<span class="cover"></span>
			<div class="ctrl">
				<div class="musicTag marquee">
					<strong>Title</strong>
					 <span> - </span>
					<span class="artist">Artist</span>
				</div>
				<div class="progress">
					<div class="timer left">0:00</div>
					<div class="contr">
						<div class="rewind icon"></div>
						<div class="playback icon"></div>
						<div class="fastforward icon"></div>
					</div>
					<div class="right">
						<div class="liebiao icon"></div>
					</div>
				</div>
			</div>
		</div>
		<div class="ssBtn">
				<div class="adf"><i class="fas fa-music" style="color: #Fff;"></i></div>
		</div>
	</div>
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/a2396837/CDN@latest/css/audio.css">
	<ol id="playlist"></ol>
</div>
<script src="https://cdn.jsdelivr.net/npm/jquery.marquee@1.5.0/jquery.marquee.min.js"></script>
<script>
	var playlist = [];
	
	var isRotate = true;
	var autoplay = false;
  </script>
<script src="https://cdn.jsdelivr.net/gh/a2396837/CDN@latest/js/player.js"></script>
<script>
  function bgChange(){
	var lis= $('.lib');
	for(var i=0; i<lis.length; i+=2)
	lis[i].style.background = 'rgba(246, 246, 246, 0.5)';
  }
  window.onload = bgChange;
</script>

  


  <script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module" defer></script>
  


  <script src="https://cdn.jsdelivr.net/gh/a2396837/CDN@latest/js/firework.js"></script>
  


  
<script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js"></script>
<script>
!function (e, t, a) {
  var initCopyCode = function(){
    var copyHtml = '';
    copyHtml += '<button class="btn-copy" data-clipboard-snippet="">';
    copyHtml += '  <i class="fa fa-clipboard"></i><span>å¤åˆ¶</span>';
    copyHtml += '</button>';
    $(".highlight .code pre").before(copyHtml);
    new ClipboardJS('.btn-copy', {
      target: function(trigger) {
        return trigger.nextElementSibling;
      }
    });
  }
  initCopyCode();
}(window, document);
</script>  
  

<script>
  var btntop = $('#gotop');
  btntop.on('click', function (e) {
    e.preventDefault();
    $('html, body').animate({ scrollTop: 0 }, '300');
  });

  var $table = $('.content table').not($('figure.highlight > table'))
$table.each(function () {
  $(this).wrap('<div class="table-wrap"></div>')
})
</script>



</html>